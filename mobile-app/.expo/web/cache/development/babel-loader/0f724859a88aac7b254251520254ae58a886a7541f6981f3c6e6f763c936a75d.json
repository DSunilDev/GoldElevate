{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/sunilkumar/Downloads/mobile-app-package/mobile-app/src/context/AuthContext.js\",\n  _this = this;\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { authAPI, setAuthStateSetters } from \"../config/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar AuthContext = createContext({});\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isAuthenticated = _useState2[0],\n    setIsAuthenticated = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    user = _useState4[0],\n    setUser = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  useEffect(function () {\n    var isMounted = true;\n    var loadingTimeout;\n    setLoading(false);\n    setAuthStateSetters({\n      setUser: setUser,\n      setIsAuthenticated: setIsAuthenticated\n    });\n    var initializeAuth = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var authPromise = checkAuth();\n          var timeoutPromise = new Promise(function (resolve) {\n            setTimeout(function () {\n              return resolve();\n            }, 200);\n          });\n          yield Promise.race([authPromise, timeoutPromise]);\n        } catch (error) {\n          console.error('Auth initialization error:', error);\n        }\n      });\n      return function initializeAuth() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    initializeAuth().catch(function () {});\n    loadingTimeout = setTimeout(function () {\n      if (isMounted) {\n        setLoading(false);\n      }\n    }, 500);\n    return function () {\n      isMounted = false;\n      if (loadingTimeout) {\n        clearTimeout(loadingTimeout);\n      }\n    };\n  }, []);\n  var checkAuth = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var authCheckPromise = Promise.all([AsyncStorage.getItem('authToken').catch(function () {\n          return null;\n        }), AsyncStorage.getItem('userData').catch(function () {\n          return null;\n        }), AsyncStorage.getItem('token').catch(function () {\n          return null;\n        }), AsyncStorage.getItem('user').catch(function () {\n          return null;\n        })]);\n        var timeoutPromise = new Promise(function (resolve) {\n          setTimeout(function () {\n            return resolve([null, null, null, null]);\n          }, 150);\n        });\n        var _yield$Promise$race = yield Promise.race([authCheckPromise, timeoutPromise]),\n          _yield$Promise$race2 = _slicedToArray(_yield$Promise$race, 4),\n          authToken = _yield$Promise$race2[0],\n          userData = _yield$Promise$race2[1],\n          token = _yield$Promise$race2[2],\n          _user = _yield$Promise$race2[3];\n        var finalToken = authToken || token;\n        var finalUserData = userData || _user;\n        if (finalToken && finalUserData) {\n          try {\n            var parsedUser = JSON.parse(finalUserData);\n            setUser(parsedUser);\n            setIsAuthenticated(true);\n            AsyncStorage.setItem('authToken', finalToken).catch(function () {});\n            AsyncStorage.setItem('userData', finalUserData).catch(function () {});\n          } catch (parseError) {\n            console.error('Error parsing user data:', parseError);\n            AsyncStorage.removeItem('authToken').catch(function () {});\n            AsyncStorage.removeItem('userData').catch(function () {});\n            AsyncStorage.removeItem('token').catch(function () {});\n            AsyncStorage.removeItem('user').catch(function () {});\n          }\n        }\n      } catch (error) {\n        console.error('Auth check error:', error);\n      }\n    });\n    return function checkAuth() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var login = function () {\n    var _ref4 = _asyncToGenerator(function* (credentials) {\n      try {\n        if (credentials.phone && credentials.otp) {\n          var _response = yield authAPI.verifyLoginOTP(credentials);\n          var _response$data = _response.data,\n            _token = _response$data.token,\n            _user2 = _response$data.user;\n          yield AsyncStorage.setItem('authToken', _token);\n          yield AsyncStorage.setItem('userData', JSON.stringify(_user2));\n          setUser(_user2);\n          setIsAuthenticated(true);\n          return {\n            success: true\n          };\n        }\n        var response = yield authAPI.login(credentials);\n        var _response$data2 = response.data,\n          token = _response$data2.token,\n          _user3 = _response$data2.user;\n        yield AsyncStorage.setItem('authToken', token);\n        yield AsyncStorage.setItem('userData', JSON.stringify(_user3));\n        setUser(_user3);\n        setIsAuthenticated(true);\n        return {\n          success: true\n        };\n      } catch (error) {\n        var _error$response, _error$response$data, _error$response2, _error$response2$data;\n        return {\n          success: false,\n          error: ((_error$response = error.response) == null ? void 0 : (_error$response$data = _error$response.data) == null ? void 0 : _error$response$data.message) || ((_error$response2 = error.response) == null ? void 0 : (_error$response2$data = _error$response2.data) == null ? void 0 : _error$response2$data.error) || 'Login failed'\n        };\n      }\n    });\n    return function login(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var signup = function () {\n    var _ref5 = _asyncToGenerator(function* (userData) {\n      try {\n        var response = yield authAPI.signup(userData);\n        var _response$data3 = response.data,\n          token = _response$data3.token,\n          _user4 = _response$data3.user;\n        yield AsyncStorage.setItem('authToken', token);\n        yield AsyncStorage.setItem('userData', JSON.stringify(_user4));\n        setUser(_user4);\n        setIsAuthenticated(true);\n        return {\n          success: true\n        };\n      } catch (error) {\n        var _error$response3, _error$response4, _error$response5;\n        console.error('Signup error details:', {\n          status: (_error$response3 = error.response) == null ? void 0 : _error$response3.status,\n          data: (_error$response4 = error.response) == null ? void 0 : _error$response4.data,\n          message: error.message\n        });\n        var errorMessage = 'Signup failed';\n        if ((_error$response5 = error.response) != null && _error$response5.data) {\n          if (error.response.data.errors && Array.isArray(error.response.data.errors)) {\n            errorMessage = error.response.data.errors.map(function (e) {\n              return e.msg || e.message;\n            }).join(', ');\n          } else {\n            errorMessage = error.response.data.message || error.response.data.error || errorMessage;\n          }\n        } else {\n          errorMessage = error.message || errorMessage;\n        }\n        if (errorMessage.includes('already registered') || errorMessage.includes('already exists')) {\n          return {\n            success: false,\n            error: 'This phone number is already registered. Please sign in instead.'\n          };\n        }\n        if (errorMessage.includes('verify') || errorMessage.includes('OTP')) {\n          return {\n            success: false,\n            error: 'Please verify your phone number first. Please request a new OTP.'\n          };\n        }\n        return {\n          success: false,\n          error: errorMessage\n        };\n      }\n    });\n    return function signup(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var adminSignup = function () {\n    var _ref6 = _asyncToGenerator(function* (adminData) {\n      try {\n        var response = yield authAPI.adminSignup(adminData);\n        var _response$data4 = response.data,\n          token = _response$data4.token,\n          _user5 = _response$data4.user;\n        yield AsyncStorage.setItem('authToken', token);\n        yield AsyncStorage.setItem('userData', JSON.stringify(_user5));\n        setUser(_user5);\n        setIsAuthenticated(true);\n        return {\n          success: true\n        };\n      } catch (error) {\n        var _error$response6, _error$response6$data;\n        return {\n          success: false,\n          error: ((_error$response6 = error.response) == null ? void 0 : (_error$response6$data = _error$response6.data) == null ? void 0 : _error$response6$data.message) || 'Admin signup failed'\n        };\n      }\n    });\n    return function adminSignup(_x3) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var logout = function () {\n    var _ref7 = _asyncToGenerator(function* () {\n      try {\n        yield authAPI.logout().catch(function () {\n          console.log('Logout endpoint not available, clearing local state only');\n        });\n      } catch (error) {\n        console.log('Logout API call failed, clearing local state');\n      } finally {\n        yield AsyncStorage.removeItem('authToken');\n        yield AsyncStorage.removeItem('userData');\n        setUser(null);\n        setIsAuthenticated(false);\n      }\n    });\n    return function logout() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  return _jsxDEV(AuthContext.Provider, {\n    value: {\n      isAuthenticated: isAuthenticated,\n      user: user,\n      loading: loading,\n      login: login,\n      signup: signup,\n      adminSignup: adminSignup,\n      logout: logout,\n      checkAuth: checkAuth,\n      setUser: setUser,\n      setIsAuthenticated: setIsAuthenticated\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, _this);\n};\nexport var useAuth = function useAuth() {\n  return useContext(AuthContext);\n};","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","AsyncStorage","authAPI","setAuthStateSetters","jsxDEV","_jsxDEV","AuthContext","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","isAuthenticated","setIsAuthenticated","_useState3","_useState4","user","setUser","_useState5","_useState6","loading","setLoading","isMounted","loadingTimeout","initializeAuth","_ref2","_asyncToGenerator","authPromise","checkAuth","timeoutPromise","Promise","resolve","setTimeout","race","error","console","apply","arguments","catch","clearTimeout","_ref3","authCheckPromise","all","getItem","_yield$Promise$race","_yield$Promise$race2","authToken","userData","token","finalToken","finalUserData","parsedUser","JSON","parse","setItem","parseError","removeItem","login","_ref4","credentials","phone","otp","response","verifyLoginOTP","_response$data","data","stringify","success","_response$data2","_error$response","_error$response$data","_error$response2","_error$response2$data","message","_x","signup","_ref5","_response$data3","_error$response3","_error$response4","_error$response5","status","errorMessage","errors","Array","isArray","map","e","msg","join","includes","_x2","adminSignup","_ref6","adminData","_response$data4","_error$response6","_error$response6$data","_x3","logout","_ref7","log","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_this","useAuth"],"sources":["/Users/sunilkumar/Downloads/mobile-app-package/mobile-app/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { authAPI, setAuthStateSetters } from '../config/api';\n\nconst AuthContext = createContext({});\n\nexport const AuthProvider = ({ children }) => {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    let isMounted = true;\n    let loadingTimeout;\n    \n    // Immediately set loading to false for faster startup (check auth in background)\n    setLoading(false);\n    setAuthStateSetters({ setUser, setIsAuthenticated });\n    \n    const initializeAuth = async () => {\n      try {\n        // Quick check with very short timeout to prevent hanging\n        const authPromise = checkAuth();\n        const timeoutPromise = new Promise((resolve) => {\n          setTimeout(() => resolve(), 200); // Very short timeout - 200ms\n        });\n        \n        await Promise.race([authPromise, timeoutPromise]);\n      } catch (error) {\n        console.error('Auth initialization error:', error);\n        // On error, just proceed without auth - user can login\n      }\n    };\n    \n    // Start initialization in background (don't block)\n    initializeAuth().catch(() => {\n      // Ignore errors - already handled\n    });\n    \n    // Safety timeout - ensure we never hang\n    loadingTimeout = setTimeout(() => {\n      if (isMounted) {\n        setLoading(false);\n      }\n    }, 500); // Max 500ms - very short\n    \n    return () => {\n      isMounted = false;\n      if (loadingTimeout) {\n        clearTimeout(loadingTimeout);\n      }\n    };\n  }, []);\n\n  const checkAuth = async () => {\n    try {\n      // Check both 'authToken'/'userData' (new format) and 'token'/'user' (legacy format)\n      // Use Promise.race with very short timeout to prevent hanging\n      const authCheckPromise = Promise.all([\n        AsyncStorage.getItem('authToken').catch(() => null),\n        AsyncStorage.getItem('userData').catch(() => null),\n        AsyncStorage.getItem('token').catch(() => null),\n        AsyncStorage.getItem('user').catch(() => null),\n      ]);\n      \n      // Very quick timeout for web - AsyncStorage should be instant\n      const timeoutPromise = new Promise((resolve) => {\n        setTimeout(() => resolve([null, null, null, null]), 150); // Reduced to 150ms\n      });\n      \n      const [authToken, userData, token, user] = await Promise.race([\n        authCheckPromise,\n        timeoutPromise,\n      ]);\n      \n      // Use new format first, fallback to legacy\n      const finalToken = authToken || token;\n      const finalUserData = userData || user;\n      \n      if (finalToken && finalUserData) {\n        try {\n          const parsedUser = JSON.parse(finalUserData);\n          setUser(parsedUser);\n          setIsAuthenticated(true);\n          // Sync to new format keys (async, don't wait)\n          AsyncStorage.setItem('authToken', finalToken).catch(() => {});\n          AsyncStorage.setItem('userData', finalUserData).catch(() => {});\n        } catch (parseError) {\n          console.error('Error parsing user data:', parseError);\n          // Clear invalid data (async, don't wait)\n          AsyncStorage.removeItem('authToken').catch(() => {});\n          AsyncStorage.removeItem('userData').catch(() => {});\n          AsyncStorage.removeItem('token').catch(() => {});\n          AsyncStorage.removeItem('user').catch(() => {});\n        }\n      }\n    } catch (error) {\n      console.error('Auth check error:', error);\n      // On error, just proceed without auth - user can login\n      // Don't set loading here - it's already false\n    }\n  };\n\n  const login = async (credentials) => {\n    try {\n      // For phone-based login, use login-verify-otp endpoint\n      // This endpoint returns token and user directly after OTP verification\n      if (credentials.phone && credentials.otp) {\n        const response = await authAPI.verifyLoginOTP(credentials);\n        const { token, user } = response.data;\n        \n        await AsyncStorage.setItem('authToken', token);\n        await AsyncStorage.setItem('userData', JSON.stringify(user));\n        \n        setUser(user);\n        setIsAuthenticated(true);\n        \n        return { success: true };\n      }\n      \n      // Legacy username/password login (for admin/agent)\n      const response = await authAPI.login(credentials);\n      const { token, user } = response.data;\n      \n      await AsyncStorage.setItem('authToken', token);\n      await AsyncStorage.setItem('userData', JSON.stringify(user));\n      \n      setUser(user);\n      setIsAuthenticated(true);\n      \n      return { success: true };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.response?.data?.message || error.response?.data?.error || 'Login failed',\n      };\n    }\n  };\n\n  const signup = async (userData) => {\n    try {\n      const response = await authAPI.signup(userData);\n      const { token, user } = response.data;\n      \n      await AsyncStorage.setItem('authToken', token);\n      await AsyncStorage.setItem('userData', JSON.stringify(user));\n      \n      setUser(user);\n      setIsAuthenticated(true);\n      \n      return { success: true };\n    } catch (error) {\n      console.error('Signup error details:', {\n        status: error.response?.status,\n        data: error.response?.data,\n        message: error.message\n      });\n      \n      // Better error handling - check for specific error messages\n      let errorMessage = 'Signup failed';\n      \n      if (error.response?.data) {\n        // Check for validation errors\n        if (error.response.data.errors && Array.isArray(error.response.data.errors)) {\n          errorMessage = error.response.data.errors.map(e => e.msg || e.message).join(', ');\n        } else {\n          errorMessage = error.response.data.message || error.response.data.error || errorMessage;\n        }\n      } else {\n        errorMessage = error.message || errorMessage;\n      }\n      \n      // If phone already registered, provide clearer message\n      if (errorMessage.includes('already registered') || errorMessage.includes('already exists')) {\n        return {\n          success: false,\n          error: 'This phone number is already registered. Please sign in instead.',\n        };\n      }\n      \n      // If OTP not verified\n      if (errorMessage.includes('verify') || errorMessage.includes('OTP')) {\n        return {\n          success: false,\n          error: 'Please verify your phone number first. Please request a new OTP.',\n        };\n      }\n      \n      return {\n        success: false,\n        error: errorMessage,\n      };\n    }\n  };\n\n  const adminSignup = async (adminData) => {\n    try {\n      const response = await authAPI.adminSignup(adminData);\n      const { token, user } = response.data;\n      \n      await AsyncStorage.setItem('authToken', token);\n      await AsyncStorage.setItem('userData', JSON.stringify(user));\n      \n      setUser(user);\n      setIsAuthenticated(true);\n      \n      return { success: true };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.response?.data?.message || 'Admin signup failed',\n      };\n    }\n  };\n\n  const logout = async () => {\n    try {\n      // Try to call logout endpoint (may not exist, that's okay)\n      await authAPI.logout().catch(() => {\n        // Ignore errors - logout endpoint may not exist\n        console.log('Logout endpoint not available, clearing local state only');\n      });\n    } catch (error) {\n      // Ignore errors - we'll clear local state anyway\n      console.log('Logout API call failed, clearing local state');\n    } finally {\n      // Always clear local storage and state\n      await AsyncStorage.removeItem('authToken');\n      await AsyncStorage.removeItem('userData');\n      setUser(null);\n      setIsAuthenticated(false);\n    }\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isAuthenticated,\n        user,\n        loading,\n        login,\n        signup,\n        adminSignup,\n        logout,\n        checkAuth,\n        setUser,\n        setIsAuthenticated,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => useContext(AuthContext);\n\n"],"mappings":";;;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC7E,OAAOC,YAAY,MAAM,2CAA2C;AACpE,SAASC,OAAO,EAAEC,mBAAmB;AAAwB,SAAAC,MAAA,IAAAC,OAAA;AAE7D,IAAMC,WAAW,GAAGT,aAAa,CAAC,CAAC,CAAC,CAAC;AAErC,OAAO,IAAMU,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EACrC,IAAAC,SAAA,GAA8CZ,QAAQ,CAAC,KAAK,CAAC;IAAAa,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAtDG,eAAe,GAAAF,UAAA;IAAEG,kBAAkB,GAAAH,UAAA;EAC1C,IAAAI,UAAA,GAAwBjB,QAAQ,CAAC,IAAI,CAAC;IAAAkB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA/BE,IAAI,GAAAD,UAAA;IAAEE,OAAO,GAAAF,UAAA;EACpB,IAAAG,UAAA,GAA8BrB,QAAQ,CAAC,IAAI,CAAC;IAAAsB,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAArCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAE1BrB,SAAS,CAAC,YAAM;IACd,IAAIwB,SAAS,GAAG,IAAI;IACpB,IAAIC,cAAc;IAGlBF,UAAU,CAAC,KAAK,CAAC;IACjBnB,mBAAmB,CAAC;MAAEe,OAAO,EAAPA,OAAO;MAAEJ,kBAAkB,EAAlBA;IAAmB,CAAC,CAAC;IAEpD,IAAMW,cAAc;MAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,aAAY;QACjC,IAAI;UAEF,IAAMC,WAAW,GAAGC,SAAS,CAAC,CAAC;UAC/B,IAAMC,cAAc,GAAG,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAK;YAC9CC,UAAU,CAAC;cAAA,OAAMD,OAAO,CAAC,CAAC;YAAA,GAAE,GAAG,CAAC;UAClC,CAAC,CAAC;UAEF,MAAMD,OAAO,CAACG,IAAI,CAAC,CAACN,WAAW,EAAEE,cAAc,CAAC,CAAC;QACnD,CAAC,CAAC,OAAOK,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;QAEpD;MACF,CAAC;MAAA,gBAbKV,cAAcA,CAAA;QAAA,OAAAC,KAAA,CAAAW,KAAA,OAAAC,SAAA;MAAA;IAAA,GAanB;IAGDb,cAAc,CAAC,CAAC,CAACc,KAAK,CAAC,YAAM,CAE7B,CAAC,CAAC;IAGFf,cAAc,GAAGS,UAAU,CAAC,YAAM;MAChC,IAAIV,SAAS,EAAE;QACbD,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC,EAAE,GAAG,CAAC;IAEP,OAAO,YAAM;MACXC,SAAS,GAAG,KAAK;MACjB,IAAIC,cAAc,EAAE;QAClBgB,YAAY,CAAChB,cAAc,CAAC;MAC9B;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMK,SAAS;IAAA,IAAAY,KAAA,GAAAd,iBAAA,CAAG,aAAY;MAC5B,IAAI;QAGF,IAAMe,gBAAgB,GAAGX,OAAO,CAACY,GAAG,CAAC,CACnC1C,YAAY,CAAC2C,OAAO,CAAC,WAAW,CAAC,CAACL,KAAK,CAAC;UAAA,OAAM,IAAI;QAAA,EAAC,EACnDtC,YAAY,CAAC2C,OAAO,CAAC,UAAU,CAAC,CAACL,KAAK,CAAC;UAAA,OAAM,IAAI;QAAA,EAAC,EAClDtC,YAAY,CAAC2C,OAAO,CAAC,OAAO,CAAC,CAACL,KAAK,CAAC;UAAA,OAAM,IAAI;QAAA,EAAC,EAC/CtC,YAAY,CAAC2C,OAAO,CAAC,MAAM,CAAC,CAACL,KAAK,CAAC;UAAA,OAAM,IAAI;QAAA,EAAC,CAC/C,CAAC;QAGF,IAAMT,cAAc,GAAG,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAK;UAC9CC,UAAU,CAAC;YAAA,OAAMD,OAAO,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;UAAA,GAAE,GAAG,CAAC;QAC1D,CAAC,CAAC;QAEF,IAAAa,mBAAA,SAAiDd,OAAO,CAACG,IAAI,CAAC,CAC5DQ,gBAAgB,EAChBZ,cAAc,CACf,CAAC;UAAAgB,oBAAA,GAAAlC,cAAA,CAAAiC,mBAAA;UAHKE,SAAS,GAAAD,oBAAA;UAAEE,QAAQ,GAAAF,oBAAA;UAAEG,KAAK,GAAAH,oBAAA;UAAE7B,KAAI,GAAA6B,oBAAA;QAMvC,IAAMI,UAAU,GAAGH,SAAS,IAAIE,KAAK;QACrC,IAAME,aAAa,GAAGH,QAAQ,IAAI/B,KAAI;QAEtC,IAAIiC,UAAU,IAAIC,aAAa,EAAE;UAC/B,IAAI;YACF,IAAMC,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACH,aAAa,CAAC;YAC5CjC,OAAO,CAACkC,UAAU,CAAC;YACnBtC,kBAAkB,CAAC,IAAI,CAAC;YAExBb,YAAY,CAACsD,OAAO,CAAC,WAAW,EAAEL,UAAU,CAAC,CAACX,KAAK,CAAC,YAAM,CAAC,CAAC,CAAC;YAC7DtC,YAAY,CAACsD,OAAO,CAAC,UAAU,EAAEJ,aAAa,CAAC,CAACZ,KAAK,CAAC,YAAM,CAAC,CAAC,CAAC;UACjE,CAAC,CAAC,OAAOiB,UAAU,EAAE;YACnBpB,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEqB,UAAU,CAAC;YAErDvD,YAAY,CAACwD,UAAU,CAAC,WAAW,CAAC,CAAClB,KAAK,CAAC,YAAM,CAAC,CAAC,CAAC;YACpDtC,YAAY,CAACwD,UAAU,CAAC,UAAU,CAAC,CAAClB,KAAK,CAAC,YAAM,CAAC,CAAC,CAAC;YACnDtC,YAAY,CAACwD,UAAU,CAAC,OAAO,CAAC,CAAClB,KAAK,CAAC,YAAM,CAAC,CAAC,CAAC;YAChDtC,YAAY,CAACwD,UAAU,CAAC,MAAM,CAAC,CAAClB,KAAK,CAAC,YAAM,CAAC,CAAC,CAAC;UACjD;QACF;MACF,CAAC,CAAC,OAAOJ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MAG3C;IACF,CAAC;IAAA,gBA/CKN,SAASA,CAAA;MAAA,OAAAY,KAAA,CAAAJ,KAAA,OAAAC,SAAA;IAAA;EAAA,GA+Cd;EAED,IAAMoB,KAAK;IAAA,IAAAC,KAAA,GAAAhC,iBAAA,CAAG,WAAOiC,WAAW,EAAK;MACnC,IAAI;QAGF,IAAIA,WAAW,CAACC,KAAK,IAAID,WAAW,CAACE,GAAG,EAAE;UACxC,IAAMC,SAAQ,SAAS7D,OAAO,CAAC8D,cAAc,CAACJ,WAAW,CAAC;UAC1D,IAAAK,cAAA,GAAwBF,SAAQ,CAACG,IAAI;YAA7BjB,MAAK,GAAAgB,cAAA,CAALhB,KAAK;YAAEhC,MAAI,GAAAgD,cAAA,CAAJhD,IAAI;UAEnB,MAAMhB,YAAY,CAACsD,OAAO,CAAC,WAAW,EAAEN,MAAK,CAAC;UAC9C,MAAMhD,YAAY,CAACsD,OAAO,CAAC,UAAU,EAAEF,IAAI,CAACc,SAAS,CAAClD,MAAI,CAAC,CAAC;UAE5DC,OAAO,CAACD,MAAI,CAAC;UACbH,kBAAkB,CAAC,IAAI,CAAC;UAExB,OAAO;YAAEsD,OAAO,EAAE;UAAK,CAAC;QAC1B;QAGA,IAAML,QAAQ,SAAS7D,OAAO,CAACwD,KAAK,CAACE,WAAW,CAAC;QACjD,IAAAS,eAAA,GAAwBN,QAAQ,CAACG,IAAI;UAA7BjB,KAAK,GAAAoB,eAAA,CAALpB,KAAK;UAAEhC,MAAI,GAAAoD,eAAA,CAAJpD,IAAI;QAEnB,MAAMhB,YAAY,CAACsD,OAAO,CAAC,WAAW,EAAEN,KAAK,CAAC;QAC9C,MAAMhD,YAAY,CAACsD,OAAO,CAAC,UAAU,EAAEF,IAAI,CAACc,SAAS,CAAClD,MAAI,CAAC,CAAC;QAE5DC,OAAO,CAACD,MAAI,CAAC;QACbH,kBAAkB,CAAC,IAAI,CAAC;QAExB,OAAO;UAAEsD,OAAO,EAAE;QAAK,CAAC;MAC1B,CAAC,CAAC,OAAOjC,KAAK,EAAE;QAAA,IAAAmC,eAAA,EAAAC,oBAAA,EAAAC,gBAAA,EAAAC,qBAAA;QACd,OAAO;UACLL,OAAO,EAAE,KAAK;UACdjC,KAAK,EAAE,EAAAmC,eAAA,GAAAnC,KAAK,CAAC4B,QAAQ,sBAAAQ,oBAAA,GAAdD,eAAA,CAAgBJ,IAAI,qBAApBK,oBAAA,CAAsBG,OAAO,OAAAF,gBAAA,GAAIrC,KAAK,CAAC4B,QAAQ,sBAAAU,qBAAA,GAAdD,gBAAA,CAAgBN,IAAI,qBAApBO,qBAAA,CAAsBtC,KAAK,KAAI;QACzE,CAAC;MACH;IACF,CAAC;IAAA,gBAlCKuB,KAAKA,CAAAiB,EAAA;MAAA,OAAAhB,KAAA,CAAAtB,KAAA,OAAAC,SAAA;IAAA;EAAA,GAkCV;EAED,IAAMsC,MAAM;IAAA,IAAAC,KAAA,GAAAlD,iBAAA,CAAG,WAAOqB,QAAQ,EAAK;MACjC,IAAI;QACF,IAAMe,QAAQ,SAAS7D,OAAO,CAAC0E,MAAM,CAAC5B,QAAQ,CAAC;QAC/C,IAAA8B,eAAA,GAAwBf,QAAQ,CAACG,IAAI;UAA7BjB,KAAK,GAAA6B,eAAA,CAAL7B,KAAK;UAAEhC,MAAI,GAAA6D,eAAA,CAAJ7D,IAAI;QAEnB,MAAMhB,YAAY,CAACsD,OAAO,CAAC,WAAW,EAAEN,KAAK,CAAC;QAC9C,MAAMhD,YAAY,CAACsD,OAAO,CAAC,UAAU,EAAEF,IAAI,CAACc,SAAS,CAAClD,MAAI,CAAC,CAAC;QAE5DC,OAAO,CAACD,MAAI,CAAC;QACbH,kBAAkB,CAAC,IAAI,CAAC;QAExB,OAAO;UAAEsD,OAAO,EAAE;QAAK,CAAC;MAC1B,CAAC,CAAC,OAAOjC,KAAK,EAAE;QAAA,IAAA4C,gBAAA,EAAAC,gBAAA,EAAAC,gBAAA;QACd7C,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAE;UACrC+C,MAAM,GAAAH,gBAAA,GAAE5C,KAAK,CAAC4B,QAAQ,qBAAdgB,gBAAA,CAAgBG,MAAM;UAC9BhB,IAAI,GAAAc,gBAAA,GAAE7C,KAAK,CAAC4B,QAAQ,qBAAdiB,gBAAA,CAAgBd,IAAI;UAC1BQ,OAAO,EAAEvC,KAAK,CAACuC;QACjB,CAAC,CAAC;QAGF,IAAIS,YAAY,GAAG,eAAe;QAElC,KAAAF,gBAAA,GAAI9C,KAAK,CAAC4B,QAAQ,aAAdkB,gBAAA,CAAgBf,IAAI,EAAE;UAExB,IAAI/B,KAAK,CAAC4B,QAAQ,CAACG,IAAI,CAACkB,MAAM,IAAIC,KAAK,CAACC,OAAO,CAACnD,KAAK,CAAC4B,QAAQ,CAACG,IAAI,CAACkB,MAAM,CAAC,EAAE;YAC3ED,YAAY,GAAGhD,KAAK,CAAC4B,QAAQ,CAACG,IAAI,CAACkB,MAAM,CAACG,GAAG,CAAC,UAAAC,CAAC;cAAA,OAAIA,CAAC,CAACC,GAAG,IAAID,CAAC,CAACd,OAAO;YAAA,EAAC,CAACgB,IAAI,CAAC,IAAI,CAAC;UACnF,CAAC,MAAM;YACLP,YAAY,GAAGhD,KAAK,CAAC4B,QAAQ,CAACG,IAAI,CAACQ,OAAO,IAAIvC,KAAK,CAAC4B,QAAQ,CAACG,IAAI,CAAC/B,KAAK,IAAIgD,YAAY;UACzF;QACF,CAAC,MAAM;UACLA,YAAY,GAAGhD,KAAK,CAACuC,OAAO,IAAIS,YAAY;QAC9C;QAGA,IAAIA,YAAY,CAACQ,QAAQ,CAAC,oBAAoB,CAAC,IAAIR,YAAY,CAACQ,QAAQ,CAAC,gBAAgB,CAAC,EAAE;UAC1F,OAAO;YACLvB,OAAO,EAAE,KAAK;YACdjC,KAAK,EAAE;UACT,CAAC;QACH;QAGA,IAAIgD,YAAY,CAACQ,QAAQ,CAAC,QAAQ,CAAC,IAAIR,YAAY,CAACQ,QAAQ,CAAC,KAAK,CAAC,EAAE;UACnE,OAAO;YACLvB,OAAO,EAAE,KAAK;YACdjC,KAAK,EAAE;UACT,CAAC;QACH;QAEA,OAAO;UACLiC,OAAO,EAAE,KAAK;UACdjC,KAAK,EAAEgD;QACT,CAAC;MACH;IACF,CAAC;IAAA,gBAtDKP,MAAMA,CAAAgB,GAAA;MAAA,OAAAf,KAAA,CAAAxC,KAAA,OAAAC,SAAA;IAAA;EAAA,GAsDX;EAED,IAAMuD,WAAW;IAAA,IAAAC,KAAA,GAAAnE,iBAAA,CAAG,WAAOoE,SAAS,EAAK;MACvC,IAAI;QACF,IAAMhC,QAAQ,SAAS7D,OAAO,CAAC2F,WAAW,CAACE,SAAS,CAAC;QACrD,IAAAC,eAAA,GAAwBjC,QAAQ,CAACG,IAAI;UAA7BjB,KAAK,GAAA+C,eAAA,CAAL/C,KAAK;UAAEhC,MAAI,GAAA+E,eAAA,CAAJ/E,IAAI;QAEnB,MAAMhB,YAAY,CAACsD,OAAO,CAAC,WAAW,EAAEN,KAAK,CAAC;QAC9C,MAAMhD,YAAY,CAACsD,OAAO,CAAC,UAAU,EAAEF,IAAI,CAACc,SAAS,CAAClD,MAAI,CAAC,CAAC;QAE5DC,OAAO,CAACD,MAAI,CAAC;QACbH,kBAAkB,CAAC,IAAI,CAAC;QAExB,OAAO;UAAEsD,OAAO,EAAE;QAAK,CAAC;MAC1B,CAAC,CAAC,OAAOjC,KAAK,EAAE;QAAA,IAAA8D,gBAAA,EAAAC,qBAAA;QACd,OAAO;UACL9B,OAAO,EAAE,KAAK;UACdjC,KAAK,EAAE,EAAA8D,gBAAA,GAAA9D,KAAK,CAAC4B,QAAQ,sBAAAmC,qBAAA,GAAdD,gBAAA,CAAgB/B,IAAI,qBAApBgC,qBAAA,CAAsBxB,OAAO,KAAI;QAC1C,CAAC;MACH;IACF,CAAC;IAAA,gBAlBKmB,WAAWA,CAAAM,GAAA;MAAA,OAAAL,KAAA,CAAAzD,KAAA,OAAAC,SAAA;IAAA;EAAA,GAkBhB;EAED,IAAM8D,MAAM;IAAA,IAAAC,KAAA,GAAA1E,iBAAA,CAAG,aAAY;MACzB,IAAI;QAEF,MAAMzB,OAAO,CAACkG,MAAM,CAAC,CAAC,CAAC7D,KAAK,CAAC,YAAM;UAEjCH,OAAO,CAACkE,GAAG,CAAC,0DAA0D,CAAC;QACzE,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOnE,KAAK,EAAE;QAEdC,OAAO,CAACkE,GAAG,CAAC,8CAA8C,CAAC;MAC7D,CAAC,SAAS;QAER,MAAMrG,YAAY,CAACwD,UAAU,CAAC,WAAW,CAAC;QAC1C,MAAMxD,YAAY,CAACwD,UAAU,CAAC,UAAU,CAAC;QACzCvC,OAAO,CAAC,IAAI,CAAC;QACbJ,kBAAkB,CAAC,KAAK,CAAC;MAC3B;IACF,CAAC;IAAA,gBAjBKsF,MAAMA,CAAA;MAAA,OAAAC,KAAA,CAAAhE,KAAA,OAAAC,SAAA;IAAA;EAAA,GAiBX;EAED,OACEjC,OAAA,CAACC,WAAW,CAACiG,QAAQ;IACnBC,KAAK,EAAE;MACL3F,eAAe,EAAfA,eAAe;MACfI,IAAI,EAAJA,IAAI;MACJI,OAAO,EAAPA,OAAO;MACPqC,KAAK,EAALA,KAAK;MACLkB,MAAM,EAANA,MAAM;MACNiB,WAAW,EAAXA,WAAW;MACXO,MAAM,EAANA,MAAM;MACNvE,SAAS,EAATA,SAAS;MACTX,OAAO,EAAPA,OAAO;MACPJ,kBAAkB,EAAlBA;IACF,CAAE;IAAAL,QAAA,EAEDA;EAAQ;IAAAgG,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,GAAAC,KACW,CAAC;AAE3B,CAAC;AAED,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAA;EAAA,OAAS9G,UAAU,CAACM,WAAW,CAAC;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}